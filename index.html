<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Narrative Media Framing in Political Discourse</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="dynamic-chart-styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="nav-logo">Narrative Framing</div>
            <ul class="nav-menu">
                <li><a href="#introduction" class="nav-link">Introduction</a></li>
                <li><a href="method.html" class="nav-link">Narrative components</a></li>
                <li><a href="#example" class="nav-link">Interactive example</a></li>
                <li><a href="#demo" class="nav-link">Demo</a></li>
                <li><a href="experiments.html" class="nav-link">Experiments</a></li>
                <li><a href="#comparison" class="nav-link">USA vs Australian narratives</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero">
        <div class="container">
            <h1 class="paper-title">Narrative Media Framing in Political Discourse</h1>
            <div class="authors">
                <span class="author">Yulia Otmakhova<sup>1</sup></span>
                <span class="author">Lea Frermann<sup>1</sup></span>
            </div>
            <div class="affiliations">
                <div class="affiliation"><sup>1</sup>School of Computing and Information Systems, The University of Melbourne</div>
            </div>
            <div class="conference">
                <span class="venue">ACL 2025 Findings</span>
                <span class="status">Full Paper</span>
            </div>
            <div class="hero-buttons">
                <a href="https://arxiv.org/pdf/2506.00737" class="btn btn-secondary">üìÑ Paper</a>
                <a href="demo.html" class="btn btn-secondary">ü§ñ Demo</a>
                <a href="#" class="btn btn-secondary">üìä Dataset</a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Introduction -->
            <section id="introduction" class="section">
                <h2 class="section-title">What lies beyond the tip of the "narrative" iceberg?</h2>
                <div class="section-content">
                    <p>Narrative frames is a type of media frames that use elements of narrativity to highlight some aspects of a complex issue and condense it into a simplified "story" that promotes a particular interpretation. These elements of storytelling, such as representing an issue through the lens of stakeholders and conflicts rather than direct description of the facts, make narrative frames a highly effective device, particularly in the context of contested issues such as climate change.</p>
                    
                    <p>Despite that, automatic framing analysis still mostly disregards narrative frames and conceptualizes frames in a topic-like fashion. Recent work in NLP has studied elements of narratives such as characters or events in news reporting, but these studies often lose the link to the core mechanism of framing, and do not allow to abstract away from particular events and characters in order to differentiate between contrasting narrative frames.</p>

                    <p>In our work, we dissect narratives into components which allow to link them to mechanisms of framing, on one hand, and help to understand, distinsguish, and model them. We show how:</p>
                    <ul>
                        <li><strong>Character roles</strong> (framing particular entities as heroes, villains, and victims) as well as <strong>focus</strong> on a particular character helps to resolve <strong>ambivalence</strong> of interpretation (which is necessary for framing to occur) and assign a particular <strong>moral evaluation</strong>.</li>
                        <li><strong>Conflict and resolution</strong> represent causes and solutions to complex issues, which are core elements of their framing.</li>
                        <li><strong>Cultural stories</strong> link to broader value systems, allowing the frames to evoke wider associations existing in the culture.</li>
                    </ul>

                    <p>More details about these components can be found in our <a href="method.html" style="color: var(--primary-purple); text-decoration: none; font-weight: 600; border-bottom: 1px solid var(--primary-purple); transition: var(--transition);" onmouseover="this.style.color='var(--primary-teal)'; this.style.borderBottomColor='var(--primary-teal)'" onmouseout="this.style.color='var(--primary-purple)'; this.style.borderBottomColor='var(--primary-purple)'">method section</a> and in our <a href="https://arxiv.org/pdf/2506.00737" style="color: var(--primary-purple); text-decoration: none; font-weight: 600; border-bottom: 1px solid var(--primary-purple); transition: var(--transition);" onmouseover="this.style.color='var(--primary-teal)'; this.style.borderBottomColor='var(--primary-teal)'" onmouseout="this.style.color='var(--primary-purple)'; this.style.borderBottomColor='var(--primary-purple)'">paper</a>. The benefits of the structural approach to narratives are summarised <a href="experiments.html" style="color: var(--primary-purple); text-decoration: none; font-weight: 600; border-bottom: 1px solid var(--primary-purple); transition: var(--transition);" onmouseover="this.style.color='var(--primary-teal)'; this.style.borderBottomColor='var(--primary-teal)'" onmouseout="this.style.color='var(--primary-purple)'; this.style.borderBottomColor='var(--primary-purple)'">here</a>.</p>
                    <p>On this page we present several additions to our paper: </p>
                    <ul>
                        <li>An interactive example of how narrative components are used to frame the text.</li>
                        <li>A live demo of the model.</li>
                        <li>A comparison of climate change narratives in the USA and Australia.</li>
                    </ul>

                </div>
            </section>

            <!-- Interactive Example -->
            <section id="example" class="section">
                <h2 class="section-title">Interactive Example: Are melting icebergs actually good for us?</h2>
                <div class="section-content">
                    <p class="example-description">Hover over the highlighted text below to explore how narrative framing components work in practice:</p>
                    
                    <div class="interactive-example-container">
                        <div class="example-article">
                            <div class="example-title">Global warming fail: Study finds melting sea ice is actually helping Arctic animals</div>
                                
                            <p><span class="villain" data-tooltip="villain">Proponents of the theory humans are primarily responsible for rising global temperatures</span> long claimed wildlife are harmed significantly by global warming, and that unless mankind stops producing significant amounts of carbon-dioxide emissions, the world's animals will not be able to thrive.</p>
                                
                            <p>While rising temperatures have certainly put a strain on species in some parts of the world, <span class="hero focus" data-tooltip="hero-focus">a new study by researchers at the University of Southern Denmark</span> suggests <span class="cultural-story" data-tooltip="cultural-story">animals in the Arctic region are thriving because of higher global temperatures</span>.</p>
                                
                            <p><span class="villain" data-tooltip="villain-media">USA Today recently declared the loss of sea ice "terrifying,"</span> but <span class="hero conflict" data-tooltip="hero-conflict">global warming skeptics have long suggested these claims are overblown when put into perspective</span>.</p>
                        </div>
                        <p>Overall, this structure points to a denialist narrative frame ``No need to act'' which questions or ridicules the reality of climate change.</p>
                    </div>
                </div>
            </section>


            <!-- Model Demo -->
            <section id="demo" class="section">
                <h2 class="section-title">Interactive Model Demo</h2>
                <div class="section-content">
                    <p>Test our narrative framing model with your own articles. Our trained model will identify heroes, villains, victims, focus, conflict type, and cultural story components.</p>
                    
                    <div class="demo-container">
                        <!-- Input Section -->
                        <div class="input-section">
                            <h3>Input Article</h3>
                            <p class="input-description">
                                Paste a news article below to analyze its narrative framing components. 
                                Our model will identify heroes, villains, victims, focus, conflict type, and cultural story.
                            </p>
                            
                            <div class="input-controls">
                                <div class="sample-articles">
                                    <label for="sample-select">Try a sample article:</label>
                                    <select id="sample-select" class="sample-dropdown">
                                        <option value="">Select a sample...</option>
                                        <option value="climate1">Climate Change - Skeptical Framing</option>
                                        <option value="climate2">Climate Change - Activist Framing</option>
                                        <option value="covid1">COVID-19 - Government Response</option>
                                    </select>
                                    <button id="load-sample" class="btn btn-secondary">Load Sample</button>
                                </div>
                            </div>

                            <textarea 
                                id="article-input" 
                                class="article-textarea" 
                                placeholder="Paste your news article here..."
                                rows="12"
                            ></textarea>
                            
                            <div class="input-actions">
                                <button id="analyze-btn" class="btn btn-primary">
                                    <span class="btn-text">Analyze Article</span>
                                    <span class="btn-loading" style="display: none;">
                                        <span class="spinner"></span> Analyzing...
                                    </span>
                                </button>
                                <button id="clear-btn" class="btn btn-outline">Clear</button>
                            </div>
                        </div>

                        <!-- Results Section -->
                        <div class="results-section">
                            <h3>Analysis Results</h3>
                            <div id="results-container" class="results-container">
                                <div class="no-results">
                                    <div class="no-results-icon">üîç</div>
                                    <p>Enter an article above and click "Analyze Article" to see the narrative framing predictions.</p>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- Results Template (hidden) -->
                    <template id="results-template">
                        <div class="results-content">
                            <div class="confidence-indicator">
                                <span class="confidence-label">Overall Confidence:</span>
                                <div class="confidence-bar">
                                    <div class="confidence-fill" style="width: 0%"></div>
                                </div>
                                <span class="confidence-value">0%</span>
                            </div>

                            <div class="predictions-grid">
                                <div class="prediction-card hero-card">
                                    <h4>ü¶∏‚Äç‚ôÇÔ∏è Hero</h4>
                                    <div class="prediction-value"></div>
                                    <div class="prediction-confidence"></div>
                                </div>
                                <div class="prediction-card villain-card">
                                    <h4>ü¶π‚Äç‚ôÇÔ∏è Villain</h4>
                                    <div class="prediction-value"></div>
                                    <div class="prediction-confidence"></div>
                                </div>
                                <div class="prediction-card victim-card">
                                    <h4>üò¢ Victim</h4>
                                    <div class="prediction-value"></div>
                                    <div class="prediction-confidence"></div>
                                </div>
                                <div class="prediction-card focus-card">
                                    <h4>üéØ Focus</h4>
                                    <div class="prediction-value"></div>
                                    <div class="prediction-confidence"></div>
                                </div>
                                <div class="prediction-card conflict-card">
                                    <h4>‚öîÔ∏è Conflict</h4>
                                    <div class="prediction-value"></div>
                                    <div class="prediction-confidence"></div>
                                </div>
                                <div class="prediction-card cultural-card">
                                    <h4>üèõÔ∏è Cultural Story</h4>
                                    <div class="prediction-value"></div>
                                    <div class="prediction-confidence"></div>
                                </div>
                            </div>

                            <div class="detailed-analysis">
                                <h4>Detailed Analysis</h4>
                                <div class="analysis-text"></div>
                            </div>
                        </div>
                    </template>
                </div>
            </section>


            <section id="comparison" class="section">
                <h2 class="section-title">USA vs Australian Narratives</h2>
                <div class="section-content">
                    <h3>Another country, another time</h3>
                    <p>The beauty of our framework is that it can generalize across topics and context. In particular, it allows to discover new narrative frames which were previously not included in the framework, rather than force them into one of the pre-existing "bucket".</p>
                    <p>To demonstrate that, we additionally annotate climate-focused articles from Australian outlets published in 2024, with a similar distribution across left-centred, left and right-centered sources.</p>
                    <p>As the picture below shows, we are able not only to compare the relative frequency of the narrative frames included in the USA dataset in Australian media, but also to discover new combinations of frame componets.</p>
                    <p>Specifically, we discover two new narratives of denial and delay ("Adaption" and "Fossil fuel solutionism" <a href="https://www.cambridge.org/core/journals/global-sustainability/article/discourses-of-climate-delay/7B11B722E3E3454BB6212378E32985A7" style="color: var(--primary-purple); text-decoration: none; font-weight: 600; border-bottom: 1px solid var(--primary-purple); transition: var(--transition);" onmouseover="this.style.color='var(--primary-teal)'; this.style.borderBottomColor='var(--primary-teal)'" onmouseout="this.style.color='var(--primary-purple)'; this.style.borderBottomColor='var(--primary-purple)'">[Lamb et al., 2020]</a>), as well as two pro-climate narratives ("Pollution is choking our planet" <a href="https://www.sciencedirect.com/science/article/abs/pii/S2214629620301560" style="color: var(--primary-purple); text-decoration: none; font-weight: 600; border-bottom: 1px solid var(--primary-purple); transition: var(--transition);" onmouseover="this.style.color='var(--primary-teal)'; this.style.borderBottomColor='var(--primary-teal)'" onmouseout="this.style.color='var(--primary-purple)'; this.style.borderBottomColor='var(--primary-purple)'">[Bevan et al., 2020]</a> and "Win-win scenario" <a href="https://link.springer.com/article/10.1007/s10584-020-02761-y" style="color: var(--primary-purple); text-decoration: none; font-weight: 600; border-bottom: 1px solid var(--primary-purple); transition: var(--transition);" onmouseover="this.style.color='var(--primary-teal)'; this.style.borderBottomColor='var(--primary-teal)'" onmouseout="this.style.color='var(--primary-purple)'; this.style.borderBottomColor='var(--primary-purple)'">[Hinkel et al., 2020]</a>).</p>
                    <p>We also note that narratives of denial and delay, especially the once criticisng climate solutions and suggesting "better" fossil fuels and technological solutions, are much more present in Australian media, which confirms previous findings <a href="https://www.sciencedirect.com/science/article/abs/pii/S2214629622001748" style="color: var(--primary-purple); text-decoration: none; font-weight: 600; border-bottom: 1px solid var(--primary-purple); transition: var(--transition);" onmouseover="this.style.color='var(--primary-teal)'; this.style.borderBottomColor='var(--primary-teal)'" onmouseout="this.style.color='var(--primary-purple)'; this.style.borderBottomColor='var(--primary-purple)'">[Arranz et al., 2024]</a></p>
                    
                    <div class="comparison-chart-container">
                        <div class="chart-controls">
                            <h4>Distribution of Climate Narratives: USA vs Australia</h4>
                            <div class="chart-options">
                                <label>
                                    <input type="radio" name="sort" value="usa" checked> Sort by USA %
                                </label>
                                <label>
                                    <input type="radio" name="sort" value="australia"> Sort by Australia %
                                </label>
                                <label>
                                    <input type="radio" name="sort" value="difference"> Sort by Difference
                                </label>
                            </div>
                        </div>
                        
                        <!-- Dynamic chart container -->
                        <div id="dynamic-comparison-chart" class="dynamic-chart"></div>
                        
                        <!-- Loading indicator -->
                        <div id="chart-loading" class="chart-loading">
                            <div class="loading-spinner"></div>
                            <p>Loading chart data...</p>
                        </div>
                        
                        <!-- Narrative popup modal -->
                        <div id="narrative-modal" class="narrative-modal">
                            <div class="narrative-modal-content">
                                <span class="narrative-modal-close">&times;</span>
                                <h3 id="narrative-title"></h3>
                                <div class="narrative-structure">
                                    <h4>Structure:</h4>
                                    <div id="narrative-structure-content"></div>
                                </div>
                                <div class="narrative-description">
                                    <h4>Description:</h4>
                                    <p id="narrative-description-content"></p>
                                </div>
                                <div class="narrative-source">
                                    <h4>Source:</h4>
                                    <p id="narrative-source-content"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            

        

            <!-- Resources -->
            <!-- <section id="resources" class="section">
                <h2 class="section-title">Resources</h2>
                <div class="section-content">
                    <div class="resources-grid">
                        <div class="resource-card">
                            <div class="resource-icon">ü§ñ</div>
                            <h3>Model Demo</h3>
                            <p>Test our narrative framing model with your own articles</p>
                            <a href="demo.html" class="btn btn-outline">Try Model Demo</a>
                        </div>
                        <div class="resource-card">
                            <div class="resource-icon">üìÑ</div>
                            <h3>Paper</h3>
                            <p>Full paper with detailed methodology and comprehensive results</p>
                            <a href="#" class="btn btn-outline">Download PDF</a>
                        </div>
                        <div class="resource-card">
                            <div class="resource-icon">üìä</div>
                            <h3>Dataset</h3>
                            <p>Annotated datasets</p>
                            <a href="#" class="btn btn-outline">Download Data</a>
                        </div>
                        <div class="resource-card">
                            <div class="resource-icon">üé•</div>
                            <h3>Presentation</h3>
                            <p>Conference presentation and demo videos</p>
                            <a href="#" class="btn btn-outline">Watch Video</a>
                        </div>
                    </div>
                </div>
            </section> -->

            <!-- Citation -->
            <section id="citation" class="section">
                <h2 class="section-title">Citation</h2>
                <div class="section-content">
                    <p>If you find our work useful, please cite our paper:</p>
                    <div class="citation-box">
                        <pre id="bibtex-citation">@article{otmakhova2025narrative,
        title={Narrative Media Framing in Political Discourse},
        author={Otmakhova, Yulia and Frermann, Lea},
        journal={arXiv preprint arXiv:2506.00737},
        year={2025} }</pre>
                        <button class="copy-btn" onclick="copyBibtex()">üìã Copy BibTeX</button>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>For questions or collaborations, contact: <a href="mailto:y.otmakhova@unimelb.edu.au">y.otmakhova@unimelb.edu.au</a> or <a href="mailto:l.frermann@unimelb.edu.au">l.frermann@unimelb.edu.au</a></p>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="script.js"></script>
    <script src="demo-script.js"></script>
    
    <!-- Dynamic Chart Script -->
    <script>
    // Pre-define narrative mappings for performance
    const NARRATIVE_MAPPING = {
        'POLLUTION_IS_CHOKING': 'Pollution is choking our planet',
        'WIN_WIN': 'Win-win scenario',
        'FOSSIL_FUEL_SOLUTIOINISM': 'Fossil fuel solutionism',
        'ADAPTATION': 'Doomism',
        'NO_STICKS': 'No sticks just carrots',
        'EVERY_LITTLE_HELPS': 'Every little helps',
        'VICTIM_BLAMING': 'Victim blaming',
        'COLLAPSE_IS_IMMINENT': 'The collapse is imminent',
        'OTHERS_ARE_WORSE': 'Others are worse than us',
        'CARBON_EXPANSION': 'Carbon fueled expansion',
        'TECHNOLOGICAL_OPTIMISM': 'Technological optimism',
        'ENDANGERED_SPECIES': 'Endangered species',
        'ALL_TALK': 'All talk little action',
        'CLIMATE_SOLUTIONS_WONT_WORK': "Climate solutions won't work",
        'NO_NEED_TO_ACT': 'No need to act',
        'GORE': 'Al Gore',
        'ALL_GOING_TO_DIE': 'We are all going to die',
        'OFFICIALS_DECLARE_EMERGENCY': 'Officials declare climate emergency',
        'DEBATE_AND_SCAM': 'Debate and scam',
        'YOURE_DESTROYING_OUR_FUTURE': "You're destroying our future",
        '12_YEARS': '12 Years to Save the World'
    };


    // Override the dynamic chart function with embedded data
    function initializeDynamicComparisonChart() {
        // Embedded data to avoid CORS issues
        const data = [
            {Narrative: "POLLUTION_IS_CHOKING", USA_Percentage_num: 0.0, Australia_Percentage_num: 2.0, Difference: -2.0},
            {Narrative: "WIN_WIN", USA_Percentage_num: 0.0, Australia_Percentage_num: 7.0, Difference: -7.0},
            {Narrative: "FOSSIL_FUEL_SOLUTIOINISM", USA_Percentage_num: 0.0, Australia_Percentage_num: 10.0, Difference: -10.0},
            {Narrative: "ADAPTATION", USA_Percentage_num: 0.0, Australia_Percentage_num: 1.0, Difference: -1.0},
            {Narrative: "NO_STICKS", USA_Percentage_num: 1.0, Australia_Percentage_num: 4.0, Difference: -3.0},
            {Narrative: "EVERY_LITTLE_HELPS", USA_Percentage_num: 1.0, Australia_Percentage_num: 2.0, Difference: -1.0},
            {Narrative: "VICTIM_BLAMING", USA_Percentage_num: 1.0, Australia_Percentage_num: 0.0, Difference: 1.0},
            {Narrative: "COLLAPSE_IS_IMMINENT", USA_Percentage_num: 2.0, Australia_Percentage_num: 0.0, Difference: 2.0},
            {Narrative: "OTHERS_ARE_WORSE", USA_Percentage_num: 2.0, Australia_Percentage_num: 1.0, Difference: 1.0},
            {Narrative: "CARBON_EXPANSION", USA_Percentage_num: 3.0, Australia_Percentage_num: 4.0, Difference: -1.0},
            {Narrative: "TECHNOLOGICAL_OPTIMISM", USA_Percentage_num: 3.0, Australia_Percentage_num: 5.0, Difference: -2.0},
            {Narrative: "ENDANGERED_SPECIES", USA_Percentage_num: 3.0, Australia_Percentage_num: 3.0, Difference: 0.0},
            {Narrative: "ALL_TALK", USA_Percentage_num: 3.0, Australia_Percentage_num: 0.0, Difference: 3.0},
            {Narrative: "CLIMATE_SOLUTIONS_WONT_WORK", USA_Percentage_num: 5.0, Australia_Percentage_num: 15.0, Difference: -10.0},
            {Narrative: "NO_NEED_TO_ACT", USA_Percentage_num: 6.0, Australia_Percentage_num: 2.0, Difference: 4.0},
            {Narrative: "GORE", USA_Percentage_num: 6.0, Australia_Percentage_num: 0.0, Difference: 6.0},
            {Narrative: "ALL_GOING_TO_DIE", USA_Percentage_num: 7.0, Australia_Percentage_num: 3.0, Difference: 4.0},
            {Narrative: "OFFICIALS_DECLARE_EMERGENCY", USA_Percentage_num: 10.0, Australia_Percentage_num: 6.0, Difference: 4.0},
            {Narrative: "DEBATE_AND_SCAM", USA_Percentage_num: 11.0, Australia_Percentage_num: 23.0, Difference: -12.0},
            {Narrative: "YOURE_DESTROYING_OUR_FUTURE", USA_Percentage_num: 14.0, Australia_Percentage_num: 3.0, Difference: 11.0},
            {Narrative: "12_YEARS", USA_Percentage_num: 22.0, Australia_Percentage_num: 9.0, Difference: 13.0}
        ];

        // Hide loading indicator
        const loadingElement = document.getElementById('chart-loading');
        if (loadingElement) {
            loadingElement.style.display = 'none';
        }

        // Create initial chart
        createComparisonChart(data, 'usa');

        // Add event listeners for sorting options
        const sortOptions = document.querySelectorAll('input[name="sort"]');
        sortOptions.forEach(option => {
            option.addEventListener('change', function() {
                if (this.checked) {
                    createComparisonChart(data, this.value);
                }
            });
        });
    }

    function createComparisonChart(data, sortBy) {
        // Sort data based on selected option (in descending order)
        let sortedData = [...data];
        switch(sortBy) {
            case 'usa':
                sortedData.sort((a, b) => b.USA_Percentage_num - a.USA_Percentage_num);
                break;
            case 'australia':
                sortedData.sort((a, b) => b.Australia_Percentage_num - a.Australia_Percentage_num);
                break;
            case 'difference':
                sortedData.sort((a, b) => b.Difference - a.Difference);
                break;
        }

        // Clear existing chart
        d3.select('#dynamic-comparison-chart').selectAll('*').remove();

        // Set dimensions and margins
        const margin = {top: 40, right: 120, bottom: 100, left: 250};
        const width = 900 - margin.left - margin.right;
        const height = Math.max(800, sortedData.length * 40) - margin.top - margin.bottom;

        // Create SVG
        const svg = d3.select('#dynamic-comparison-chart')
            .append('svg')
            .attr('class', 'chart-svg')
            .attr('width', width + margin.left + margin.right)
            .attr('height', height + margin.top + margin.bottom);

        const g = svg.append('g')
            .attr('transform', `translate(${margin.left},${margin.top})`);

        // Create scales
        const xScale = d3.scaleLinear()
            .domain([0, d3.max(sortedData, d => Math.max(d.USA_Percentage_num, d.Australia_Percentage_num))])
            .range([0, width]);

        const yScale = d3.scaleBand()
            .domain(sortedData.map(d => d.Narrative))
            .range([0, height])
            .padding(0.1);

        // Create axes with larger font
        const xAxis = d3.axisBottom(xScale).ticks(10).tickFormat(d => d + '%');
        const yAxis = d3.axisLeft(yScale).tickFormat(d => {
            const narrativeMapping = {
                'POLLUTION_IS_CHOKING': 'Pollution is choking our planet',
                'WIN_WIN': 'Win-win scenario',
                'FOSSIL_FUEL_SOLUTIOINISM': 'Fossil fuel solutionism',
                'ADAPTATION': 'Adaptation',
                'NO_STICKS': 'No sticks just carrots',
                'EVERY_LITTLE_HELPS': 'Every little helps',
                'VICTIM_BLAMING': 'Victim blaming',
                'COLLAPSE_IS_IMMINENT': 'The collapse is imminent',
                'OTHERS_ARE_WORSE': 'Others are worse than us',
                'CARBON_EXPANSION': 'Carbon fueled expansion',
                'TECHNOLOGICAL_OPTIMISM': 'Technological optimism',
                'ENDANGERED_SPECIES': 'Endangered species',
                'ALL_TALK': 'All talk little action',
                'CLIMATE_SOLUTIONS_WONT_WORK': "Climate solutions won't work",
                'NO_NEED_TO_ACT': 'No need to act',
                'GORE': 'Gore',
                'ALL_GOING_TO_DIE': 'We are all going to die',
                'OFFICIALS_DECLARE_EMERGENCY': 'Officials declare emergency',
                'DEBATE_AND_SCAM': 'Debate and scam',
                'YOURE_DESTROYING_OUR_FUTURE': "You're destroying our future",
                '12_YEARS': '12 Years to Save the World'
            };
            return narrativeMapping[d] || d;
        });

        // Add x-axis with explicit styling
        const xAxisGroup = g.append('g')
            .attr('class', 'chart-axis x-axis')
            .attr('transform', `translate(0,${height})`)
            .call(xAxis);
        
        // Style x-axis explicitly
        xAxisGroup.selectAll('text')
            .style('font-size', '18px')
            .style('fill', '#000000')
            .style('font-weight', 'bold');
        
        xAxisGroup.selectAll('path, line')
            .style('stroke', '#000000')
            .style('stroke-width', '2px');
        
        // Add y-axis
        const yAxisGroup = g.append('g')
            .attr('class', 'chart-axis y-axis')
            .call(yAxis);
        
        yAxisGroup.selectAll('text')
            .style('font-size', '16px')
            .style('fill', '#000000')
            .style('cursor', 'pointer')
            .on('mouseover', function(event, d) {
                const title = NARRATIVE_MAPPING[d] || d;
                let description = 'Description not available';
                
                // Your full original descriptions
                if (d === 'POLLUTION_IS_CHOKING') description = 'The manifestations of our consumer society can be seen all around us. Through responsible consumption we can rid the natural world of these pollutants - one pollutant at a time.';
                else if (d === 'WIN_WIN') description = 'We should focus on strategies that offer both environmental and economic benefits, creating opportunities for positive change in both areas.';
                else if (d === 'FOSSIL_FUEL_SOLUTIOINISM') description = 'Fossil fuels are part of the solution. Our fuels are becoming more efficient and are the bridge towards a low-carbon future.';
                else if (d === 'ADAPTATION') description = 'Any mitigation actions we take are too little, too late. Catastrophic climate change is already locked-in. We should adapt, or accept our fate in the hands of God or nature.';
                else if (d === 'NO_STICKS') description = 'Society will only respond to supportive and voluntary policies, restrictive measures will fail and should be abandoned.';
                else if (d === 'EVERY_LITTLE_HELPS') description = 'This narrative presents a society which has transitioned to a sustainable green way of life. Could be expressed by portraying individuals as the protagonists of stories that propose solutions to climate change.';
                else if (d === 'VICTIM_BLAMING') description = 'Individuals and consumers are ultimately responsible for taking actions to address climate change.';
                else if (d === 'COLLAPSE_IS_IMMINENT') description = 'The climate crisis is such that some kind of societal collapse is near inevitable. Due to the inaction of the negligent or complacent politicians the social contract has broken down and it is incumbent upon individuals to engage in non-violent civil disobedience to shock society into urgent action.';
                else if (d === 'OTHERS_ARE_WORSE') description = 'Other countries, cities or industries are worse than ourselves. There is no point for us to implement climate policies, because we only cause a small fraction of the emissions. As long as others emit even more than us, actions will not be effective.';
                else if (d === 'CARBON_EXPANSION') description = 'The free market is at the centre of this narrative which presents action on climate change as an obstacle to the freedom and well-being of citizens. The narrative can stress social justice or well-being of individual citizens.';
                else if (d === 'TECHNOLOGICAL_OPTIMISM') description = 'We should focus our efforts on current and future technologies, which will unlock great possibilities for addressing climate change.';
                else if (d === 'ENDANGERED_SPECIES') description = 'Endangered species (like polar bears) are the helpless victims of this narrative, who are seeing their habitat destroyed by the actions of villainous humans.';
                else if (d === 'ALL_TALK') description = 'This narrative emphasises inconsistency between ambitious climate action targets and actual actions.';
                else if (d === 'CLIMATE_SOLUTIONS_WONT_WORK') description = 'Climate policies are harmful and a threat to society and the economy. Climate policies are ineffective and too difficult to implement.';
                else if (d === 'NO_NEED_TO_ACT') description = 'Human greenhouse gases are not causing global warming. The current warming is part of a natural cycle. Events such as extreme weather are not due to climate change.';
                else if (d === 'GORE') description = 'This is a narrative of scientific discovery which climaxes on the certainty that climate change is unequivocally caused by humans.';
                else if (d === 'ALL_GOING_TO_DIE') description = 'This narrative shows the current or potential catastrophic impact of climate change on people.';
                else if (d === 'OFFICIALS_DECLARE_EMERGENCY') description = 'The climate crisis is sufficiently severe that it warrants declaring a climate emergency. This should occur at different levels of government as climate requires action at all levels, from the hyper-local to the global.';
                else if (d === 'DEBATE_AND_SCAM') description = 'The heroes of this narrative are sceptical individuals who dare to challenge the false consensus on climate change which is propagated by those with vested interests.';
                else if (d === 'YOURE_DESTROYING_OUR_FUTURE') description = 'The political stasis around climate change means that we cannot rely on politicians to create the change necessary. With collective action, even the politically weak can make a difference and secure a future for generations to come. This can manifest as anything from protests (school strikes) to non-violent civil disobedience.';
                else if (d === '12_YEARS') description = 'Past and present human action (or inaction) risks a catastrophic future climatic event unless people change their behaviour to mitigate climate change.';
                
                showChartTooltip(event, title, description);
            })
            .on('mouseout', hideChartTooltip);
        
        yAxisGroup.selectAll('path, line')
            .style('stroke', '#000000')
            .style('stroke-width', '2px');

        // Add axis labels with much larger font
        g.append('text').attr('class', 'chart-axis-label').attr('transform', `translate(${width/2}, ${height + 60})`)
            .style('text-anchor', 'middle').style('font-size', '22px').style('font-weight', 'bold').text('Percentage (%)');

        // Create bars for USA
        g.selectAll('.bar-usa').data(sortedData).enter().append('rect')
            .attr('class', 'chart-bar usa')
            .attr('x', 0)
            .attr('y', d => yScale(d.Narrative))
            .attr('width', d => xScale(d.USA_Percentage_num))
            .attr('height', yScale.bandwidth() / 2);

        // Create bars for Australia
        g.selectAll('.bar-australia').data(sortedData).enter().append('rect')
            .attr('class', 'chart-bar australia')
            .attr('x', 0)
            .attr('y', d => yScale(d.Narrative) + yScale.bandwidth() / 2)
            .attr('width', d => xScale(d.Australia_Percentage_num))
            .attr('height', yScale.bandwidth() / 2);


        // Add legend (positioned in top-right area beyond the bars)
        const legend = g.append('g').attr('class', 'chart-legend').attr('transform', `translate(${width + 10}, -20)`);
        legend.append('rect').attr('x', 0).attr('y', 0).attr('width', 18).attr('height', 18).attr('fill', '#1f77b4');
        legend.append('text').attr('x', 25).attr('y', 14).style('font-size', '20px').style('font-weight', 'bold').text('USA');
        legend.append('rect').attr('x', 0).attr('y', 30).attr('width', 18).attr('height', 18).attr('fill', '#ff7f0e');
        legend.append('text').attr('x', 25).attr('y', 44).style('font-size', '20px').style('font-weight', 'bold').text('Australia');
    }

    // Tooltip functions for chart
    function showChartTooltip(event, title, description) {
        // Create tooltip if it doesn't exist
        let tooltip = document.getElementById('chart-tooltip');
        if (!tooltip) {
            tooltip = document.createElement('div');
            tooltip.id = 'chart-tooltip';
            tooltip.className = 'tooltip';
            document.body.appendChild(tooltip);
        }
        
        tooltip.innerHTML = `<h4 style="color: var(--primary-teal); font-size: 1rem; font-weight: 600; margin: 0 0 6px 0;">${title}</h4><p style="margin: 0; font-size: 0.85rem;">${description}</p>`;
        tooltip.classList.add('show');
        tooltip.style.left = (event.pageX + 10) + 'px';
        tooltip.style.top = (event.pageY - 30) + 'px';
    }
    
    function hideChartTooltip() {
        const tooltip = document.getElementById('chart-tooltip');
        if (tooltip) {
            tooltip.classList.remove('show');
        }
    }

    // Initialize the chart when the page loads
    document.addEventListener('DOMContentLoaded', function() {
        initializeDynamicComparisonChart();
    });
    </script>
</body>
</html>
